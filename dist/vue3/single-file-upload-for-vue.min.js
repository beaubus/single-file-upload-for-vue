var SingleFileUploadForVue=function(e){"use strict";function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,i,l=[],o=!0,a=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(l.push(n.value),!t||l.length!==t);o=!0);}catch(e){a=!0,i=e}finally{try{o||null==r.return||r.return()}finally{if(a)throw i}}return l}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var n={name:"single-file-upload-for-vue",props:{name:{type:String,default:"file_input"},store_url:{type:String,default:"/store-url"},destroy_url:{type:String,default:"/destroy-url"},headers:Object,loaded:Object,accept:String},data:function(){return{is_dragging:!1,uploaded_file:{name:"",url:"",size:0},default_message:"Drop file in here or click to upload",message:"",error:""}},computed:{currentMessage:function(){return this.error&&!this.uploaded_file.name?this.error:this.uploaded_file.name?"":this.message},currentFileSize:function(){if(this.error)return this.error;var e=this.uploaded_file.size;if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}},methods:{dropFile:function(e){if(e.dataTransfer.files&&e.dataTransfer.files[0]){if(this.accept){var t=this.accept.split(","),r=e.dataTransfer.files[0].name||"",n=(e.dataTransfer.files[0].type||"").toLowerCase(),i=n.replace(/\/.*$/,"");if(!t.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):n===t})))return this.error="File type is not valid",void(this.is_dragging=!1)}this.$refs["file-input"].files=e.dataTransfer.files,this.uploadTemporaryFile()}},triggerFileSelect:function(){this.$refs["file-input"].click()},uploadTemporaryFile:function(){var e=this,t=this.$refs["file-input"].files,r=new FormData;t[0]&&(this.is_dragging=!1,this.error="",r.append(this.name,t[0]),this.message="uploading...",fetch(this.store_url,{method:"POST",body:r,headers:this.headers}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e}))})).then((function(t){if(!t.url)throw"No url provided...";e.message=e.default_message,e.is_dragging=!1,e.message="",e.error="",e.uploaded_file.name=t.url.substring(t.url.lastIndexOf("/")+1),e.uploaded_file.url=t.url,e.uploaded_file.size=t.size,e.$emit("complete",t)})).catch((function(t){var r;return e.error=null!==(r=null==t?void 0:t.message)&&void 0!==r?r:t})))},removeTemporaryFile:function(){var e=this;if(!this.uploaded_file.url)throw"Url for uploaded file is not provided";"brightness(75%)"!==this.$refs["delete-button"].style.filter?this.$refs["delete-button"].style.filter="brightness(75%)":fetch(this.destroy_url+"/"+this.uploaded_file.name,{method:"DELETE",headers:this.headers}).then((function(e){return e.ok?e.json():e.json().then((function(e){throw e}))})).then((function(t){if(!t.result)throw"File is not deleted...";e.uploaded_file.name="",e.uploaded_file.url="",e.uploaded_file.size=0,e.message=e.default_message,e.error="",e.$refs["delete-button"].style.filter=""})).catch((function(t){var r;e.$refs["delete-button"].style.filter="",e.error=null!==(r=null==t?void 0:t.message)&&void 0!==r?r:t}))}},created:function(){this.message=this.default_message,this.loaded&&(this.uploaded_file.name=this.loaded.url.substring(this.loaded.url.lastIndexOf("/")+1),this.uploaded_file.url=this.loaded.url,this.uploaded_file.size=this.loaded.size)}},i=["accept"],l={class:"file"},o=["href"],a=[e.createElementVNode("path",{d:"M2.93 17.07A10 10 0 1 1 17.07 2.93 10 10 0 0 1 2.93 17.07zm1.41-1.41A8 8 0 1 0 15.66 4.34 8 8 0 0 0 4.34 15.66zm9.9-8.49L11.41 10l2.83 2.83-1.41 1.41L10 11.41l-2.83 2.83-1.41-1.41L8.59 10 5.76 7.17l1.41-1.41L10 8.59l2.83-2.83 1.41 1.41z"},null,-1)];!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}("\n.single-file-upload-for-vue {\n        width: 100%;\n        height: 100%;\n        font-size: .75em;\n        border: 2px dashed lightgray;\n        background: #f1f1f1;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        cursor: pointer;\n        text-align: center;\n        overflow: scroll;\n}\n.single-file-upload-for-vue.dragging {\n        filter: brightness(0.9);\n}\n.single-file-upload-for-vue > input{\n        display: none;\n}\n.single-file-upload-for-vue > div {\n        max-width: 100%;\n        padding: 1rem;\n}\n.single-file-upload-for-vue .file {\n        overflow: hidden;\n}\n.single-file-upload-for-vue .file >p:nth-of-type(1) {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        direction: rtl;\n        text-align: left;\n}\n.single-file-upload-for-vue .file >p:nth-of-type(1) > a {\n        white-space: nowrap;\n}\n.single-file-upload-for-vue .file >p:nth-of-type(3) {\n        display: flex;\n        justify-content: center;\n        padding-top: .5rem;\n        margin-bottom: 0;\n        line-height: 1;\n}\n.single-file-upload-for-vue .file >p:nth-of-type(3) > svg {\n        fill: #FF0000;\n        height: 1rem;\n        width: 1rem;\n        cursor: pointer;\n}\n.single-file-upload-for-vue.failed {\n        border: 2px dashed #d50000;\n        background: #ffecec;\n}\n"),n.render=function(t,r,n,s,d,u){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([{dragging:d.is_dragging},{failed:d.error},"single-file-upload-for-vue"]),onDragover:r[3]||(r[3]=e.withModifiers((function(){}),["prevent"])),onDragenter:r[4]||(r[4]=function(e){return d.uploaded_file.name?d.is_dragging=!1:d.is_dragging=!0}),onDragleave:r[5]||(r[5]=function(e){return d.is_dragging=!1}),onDrop:r[6]||(r[6]=e.withModifiers((function(){return u.dropFile&&u.dropFile.apply(u,arguments)}),["prevent"])),onClick:r[7]||(r[7]=function(){return u.triggerFileSelect&&u.triggerFileSelect.apply(u,arguments)})},[e.createElementVNode("input",{type:"file",accept:n.accept,onChange:r[0]||(r[0]=function(){return u.uploadTemporaryFile&&u.uploadTemporaryFile.apply(u,arguments)}),ref:"file-input"},null,40,i),e.createTextVNode(" "+e.toDisplayString(u.currentMessage)+" ",1),d.uploaded_file.name?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:r[2]||(r[2]=e.withModifiers((function(){}),["stop"]))},[e.createElementVNode("div",l,[e.createElementVNode("p",null,[e.createElementVNode("a",{target:"_blank",href:d.uploaded_file.url},e.toDisplayString(d.uploaded_file.name),9,o)]),e.createElementVNode("p",null,e.toDisplayString(u.currentFileSize),1),e.createElementVNode("p",null,[(e.openBlock(),e.createElementBlock("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",ref:"delete-button",onClick:r[1]||(r[1]=function(){return u.removeTemporaryFile&&u.removeTemporaryFile.apply(u,arguments)})},a,512))])])])):e.createCommentVNode("",!0)],34)};var s=function(){var e=n;return e.install=function(t){t.component("SingleFileUploadForVue",e)},e}(),d=Object.freeze({__proto__:null,default:s});return Object.entries(d).forEach((function(e){var r=t(e,2),n=r[0],i=r[1];"default"!==n&&(s[n]=i)})),s}(Vue);